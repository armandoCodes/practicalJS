<!DOCTYPE html>

<html>
  <head>
    <title>Practical JavaScript</title>
  </head>

  <body>
    <h1>Todo List</h1>
    
    <button onclick="handlers.displayTodos()">Display Todos</button>
    <button onclick="handlers.toggleAll()">Toggle All</button>

    <script>
      // dev ready
      var todoList = {
        todos: [],
        displayTodos: function() {
          
          if (this.todos.length === 0) {
            console.log("Your todoList is empty.");
          } else {
            console.log('My todos:');
            for (var i = 0; i < this.todos.length; i++) {
              if (this.todos[i].completed===true) {
                console.log('(x)', this.todos[i].todoText);
              } else {
                console.log('( )', this.todos[i].todoText);
              }
            } 
          }
          // if there are no todos, console.log("todo list is empty")
          // print todos as normal
        },
        addTodo: function(todoText) {
          this.todos.push({
            todoText: todoText,
            completed: false
          });
          this.displayTodos();
        },
        changeTodo: function(pos, todoText) {
          this.todos[pos].todoText = todoText;
          this.displayTodos();
        },
        deleteTodo: function(pos) {
          this.todos.splice(pos, 1);
          this.displayTodos();
        },
        toggleCompleted: function(pos) {
          var todo = this.todos[pos];
          todo.completed = !todo.completed;
          this.displayTodos();
        },
        toggleAll: function() {
          // if everything is true, make everything false
          var totalTodos = this.todos.length;
          var completedTodos = 0;
          // get number of completed todos
          for (var i = 0; i < totalTodos; i++) {
            if (this.todos[i].completed === true) {
              completedTodos++;
            }
          }
          // Case 1: toggle everything false 
          if (completedTodos === totalTodos) {
            //make everything false
            for (var i = 0; i < totalTodos; i++) {
              this.todos[i].completed = false;
            }
          } else { 
            // Case 2: toggel everything as true
            for (var i = 0; i < totalTodos; i++) {
              this.todos[i].completed = true;
            }
          }
          this.displayTodos();
        }
      };

      var handlers = {
        displayTodos: function() {
          todoList.displayTodos();
        },
        toggleAll: function() {
          todoList.toggleAll();
        }
      };
      
    </script>
  </body>
</html>